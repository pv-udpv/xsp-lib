[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "xsp-lib"
version = "0.1.0"
description = "Universal AdTech service protocol library - VAST, OpenRTB, DAAST, CATS upstreams with pluggable transports and middleware; Industry specs and standards implementations"
readme = "README.md"
requires-python = ">=3.11"
license = {text = "MIT"}
keywords = [
    "adtech", "programmatic", "advertising",
    "vast", "openrtb", "daast", "cats",
    "vpaid", "vmap", "opendirect", "adcom",
    "dsp", "ssp", "upstream", "protocol"
]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Internet :: WWW/HTTP",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Typing :: Typed",
]

dependencies = [
    "typing-extensions>=4.8.0",
]

[project.optional-dependencies]
# Transport backends
http = ["httpx>=0.25.0"]
grpc = ["grpcio>=1.59.0", "protobuf>=4.25.0"]
websocket = ["websockets>=12.0"]

# Protocol implementations (added incrementally)
vast = ["lxml>=5.0.0"]  # Issue pv-udpv/xsp-lib#2
openrtb = ["orjson>=3.9.0"]  # Issue pv-udpv/xsp-lib#3
daast = ["lxml>=5.0.0"]  # Issue pv-udpv/xsp-lib#4

# Standards and schemas (future)
schemas = ["jsonschema>=4.20.0", "pydantic>=2.5.0"]

# Full install
all = ["xsp-lib[http,grpc,websocket,vast,openrtb,daast,schemas]"]

# Development
dev = [
    "pytest>=7.4.0",
    "pytest-asyncio>=0.21.0",
    "pytest-cov>=4.1.0",
    "pytest-timeout>=2.2.0",
    "mypy>=1.7.0",
    "ruff>=0.1.6",
    "black>=23.11.0",
]

[project.urls]
Homepage = "https://github.com/pv-udpv/xsp-lib"
Documentation = "https://xsp-lib.readthedocs.io"
Repository = "https://github.com/pv-udpv/xsp-lib"
Issues = "https://github.com/pv-udpv/xsp-lib/issues"

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
timeout = 300
addopts = "-v --cov=xsp --cov-report=term-missing"

[tool.mypy]
python_version = "3.11"
strict = true

[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "I", "N", "W", "UP"]
ignore = []

[tool.black]
line-length = 100
target-version = ["py311"]
